About
=====

Wgurecky's neovim configuration files.  Useful for c, cpp, python, and latex files.


Depends
=======

- python3-neovim
- python2-neovim
- clang
- gcc
- [ack]
- [jedi]
- [pylint]
- [proselint]

[ack]: https://beyondgrep.com/
[jedi]: https://github.com/davidhalter/jedi
[pylint]: https://www.pylint.org/

Optional
---------

- [clang-tidy]

[clang-tidy]: https://clang.llvm.org/extra/clang-tidy/

Config
=======

C++ / C
-------

This neovim configuration assumes that a C/C++ project will be built out of the src tree and is a git repository:

```
PROJECT_BASE
+-- CMakeLists.txt
+-- README.md
+-- .git
|   +-- FETCH_HEAD
|   +-- '...'
+-- build
|   +-- do_configure.sh
|   +-- makefile
+-- src
|   +-- foo_bar.cpp
|   +-- foo_bar.hpp
```

### Build

In order to compile the project (async make) `makeprg` should be pointed at a folder which includes the project's make file.  Ex:

    :set makeprg=make\ -C\ ~/path/to/project/build

A function present in the included `init.vim` attempts to set `makeprg` automatically.  The function might not always produce the expected result.  Check that `makeprg` is set correctly by issuing:

    :set makeprg

Once `makeprg` is verified, run:

    :Make!

Which will launch make in the background so that you can continue to edit uninterrupted.  To view the results run:

    :Copen

Note: The designated project build folder name can be adjusted in the `./ftplugin/<c,cpp>` files.  By default it is set to `build`.


### Auto Completion

C++ auto completion requires a `.clang_complete` file in the project's root directory.  This file can be automatically generated by issuing the following in the build directory (credit: G.  Rutenberg):

```
CXX="$HOME/.nvim/plugged/clang_complete/bin/cc_args.py clang++" cmake ..
make
```

In case this does not work, the YCM-Generator package can generate a custom `.ycm_extra_conf.py` which one can easily modify to create a project specific `.clang_complete` (just copy the relevant info from the `flags` list to a `.clang_complete` file in the root project dir):

```
$HOME/.nvim/plugged/YCM-Generator/config_gen.py -m make .
```

Python
------

Optional:
Place `flake8` file in `~/.config/.` to ignore some minor PEP8 violation warnings from showing up in the quickfix window.

### Auto Completion

Auto complete for python requires `jedi` to be installed.

### Linting

Install pylint, for ex:

    pip install pylint

Install proselint:

    pip install proselint

[proselint] is a prose checking tool for markdown and latex files.  Helps avoid engrish.

[proselint]: https://github.com/amperser/proselint

Notes
=====

Code folding
------------

Code folding settings are provided in the `./ftplugin` directory.  By default, folding by indentation level is ON.  `za` toggles folding for the current indent level.  `zR` and `zM` unfolds and folds all respectively.

Breakpoints in Python
----------------------

In normal mode `<leader> b` inserts a breakpoint on the line above the current cursor position.


Project Wide Find/Replace
--------------------------

The `ack.vim` plugin requires `ack` to function.  One installed, a project wide search replace can be performed:

    :Ack {pattern} [{dir}]
    :cdo s/foo/bar/gc | update

Note:  The `ack` executable is sometimes in a weird spot depending on your linux distro.  In arch by default it resides in `/usr/bin/vendor_perl/ack`
