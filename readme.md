About
=====

Wgurecky's neovim configuration files.  Useful for c, cpp, python, and latex files.


Depends
=======

- python3-neovim
- python2-neovim
- clang
- gcc
- [ack]
- [python-language-server]
- [jedi]
- [pylint]


[ack]: https://beyondgrep.com/
[jedi]: https://github.com/davidhalter/jedi
[pylint]: https://www.pylint.org/
[python-language-server]: https://github.com/palantir/python-language-server

Optional
---------

- [clang-tidy]
- [proselint]
- [write-good]

[clang-tidy]: https://clang.llvm.org/extra/clang-tidy/

Config
=======

C++ / C
-------

This neovim configuration assumes that a C/C++ project is built out of the src tree and is a git repository:

```
PROJECT_BASE
+-- CMakeLists.txt
+-- README.md
+-- .git
|   +-- FETCH_HEAD
|   +-- '...'
+-- build
|   +-- do_configure.sh
|   +-- makefile
+-- src
|   +-- foo_bar.cpp
|   +-- foo_bar.hpp
```

### Build

To compile the project (async make) `makeprg` should point at a folder which includes the project's make file.  Ex:

    :set makeprg=make\ -C\ ~/path/to/project/build

A function present in the included `init.vim` attempts to set `makeprg` automatically.  The function might not always produce the expected result.  Check that `makeprg` is set by issuing:

    :set makeprg

Once `makeprg` is verified, run:

    :Make!

Which will launch make in the background so that you can continue to edit uninterrupted.  To view the results run:

    :Copen

Note: The designated project build folder name can be adjusted in the `./ftplugin/<c,cpp>` files.  By default it is set to `build`.


### Auto Completion

C++ auto completion requires a `.clang_complete` file in the project's root directory.  This file can be automatically generated by issuing the following in the build directory (credit: G.  Rutenberg):

```
CXX="$HOME/.nvim/plugged/clang_complete/bin/cc_args.py clang++" cmake ..
make
```

In case this does not work, the YCM-Generator package can generate a custom `.ycm_extra_conf.py` which one can used to create a project specific `.clang_complete` (copy the relevant info from the `flags` list to a `.clang_complete` file in the root project directory):

```
$HOME/.nvim/plugged/YCM-Generator/config_gen.py -m make .
```

[Clangd] provides autocompletion for C/C++ projects.  Some linux distributions have a `clang-tools` package that contains Clangd.

[Clangd]: https://clang.llvm.org/extra/clangd.html

Python
------

Optional:
Place `flake8` file in `~/.config/.` to ignore some minor PEP8 violation warnings from showing up in the quickfix window.

### Auto Completion

Auto complete for python requires the `python-language-server` and `jedi` to be installed:

    pip install python-language-server jedi

### Linting

Install pylint, for ex:

    pip install pylint

### Breakpoints in Python

In normal mode `<leader> b` inserts a breakpoint on the line above the current cursor position.

Prose
------

### Linting

Install proselint:

    pip install proselint

[proselint] is a prose checking tool for markdown and latex files.

[proselint]: https://github.com/amperser/proselint
[write-good]: https://github.com/btford/write-good

Notes
=====

Find/Replace Mappings and Shortcuts
-----------------------------------

To search and replace a word inside all files in a directory:

    :Ack {pattern} [{dir}]
    :cdo s/foo/bar/gc | update

To search and replace all instances of a word inside a project that is a git repository use:

    :vg <pattern>
    :cdo s/foo/bar/gc | update

To search and replace all instances of the current word under the cursor in the current git repo do:

    <leader>*
    :cdo s/foo/bar/gc | update

Where `<leader>` is set to `\` by default.

To find replace the current word under the cursor in the current file use:

    <leader>s

Code folding
------------

The `./ftplugin` directory provides code folding settings.
By default, folding by indentation level is on.  `za` toggles folding for the current indent level.  `zR` and `zM` unfolds and folds all respectively.
